{"remainingRequest":"/Users/rohansingh/Downloads/e-commerceApp/node_modules/babel-loader/lib/index.js!/Users/rohansingh/Downloads/e-commerceApp/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/Users/rohansingh/Downloads/e-commerceApp/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/rohansingh/Downloads/e-commerceApp/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/rohansingh/Downloads/e-commerceApp/src/views/Checkout/Checkout.vue?vue&type=template&id=6ae6fdc5","dependencies":[{"path":"/Users/rohansingh/Downloads/e-commerceApp/src/views/Checkout/Checkout.vue","mtime":1631518566000},{"path":"/Users/rohansingh/Downloads/e-commerceApp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/rohansingh/Downloads/e-commerceApp/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/rohansingh/Downloads/e-commerceApp/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1628298225000},{"path":"/Users/rohansingh/Downloads/e-commerceApp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/rohansingh/Downloads/e-commerceApp/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1628298225000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlRWxlbWVudFZOb2RlIGFzIF9jcmVhdGVFbGVtZW50Vk5vZGUsIG9wZW5CbG9jayBhcyBfb3BlbkJsb2NrLCBjcmVhdGVFbGVtZW50QmxvY2sgYXMgX2NyZWF0ZUVsZW1lbnRCbG9jayB9IGZyb20gInZ1ZSI7CnZhciBfaG9pc3RlZF8xID0gewogICJjbGFzcyI6ICJkaXZfY2xhc3MiCn07Cgp2YXIgX2hvaXN0ZWRfMiA9IC8qI19fUFVSRV9fKi9fY3JlYXRlRWxlbWVudFZOb2RlKCJoMyIsIG51bGwsICJZb3Ugd2lsbCBiZSByZWRpcmVjdGVkIHRvIHBheW1lbnQgcGFnZSIsIC0xCi8qIEhPSVNURUQgKi8KKTsKCnZhciBfaG9pc3RlZF8zID0gLyojX19QVVJFX18qL19jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIHsKICAiY2xhc3MiOiAiYWxlcnQgYWxlcnQtcHJpbWFyeSIsCiAgcm9sZTogImFsZXJ0Igp9LCAiIFdoaWxlIG1ha2luZyBwYXltZW50IHVzZSBjYXJkIG51bWJlciA0MjQyIDQyNDIgNDI0MiA0MjQyIGFuZCBlbnRlciByYW5kb20gY3Z2KDMgZGlnaXQpICIsIC0xCi8qIEhPSVNURUQgKi8KKTsKCmV4cG9ydCBmdW5jdGlvbiByZW5kZXIoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jaygiZGl2IiwgX2hvaXN0ZWRfMSwgW19ob2lzdGVkXzIsIF9ob2lzdGVkXzMsIF9jcmVhdGVFbGVtZW50Vk5vZGUoImJ1dHRvbiIsIHsKICAgICJjbGFzcyI6ICJjaGVja291dF9idXR0b24iLAogICAgaWQ6ICJwcm9jZWVkLXRvLWNoZWNrb3V0IiwKICAgIG9uQ2xpY2s6IF9jYWNoZVswXSB8fCAoX2NhY2hlWzBdID0gZnVuY3Rpb24gKCRldmVudCkgewogICAgICByZXR1cm4gJG9wdGlvbnMuZ29Ub0NoZWNrb3V0KCk7CiAgICB9KQogIH0sICIgTWFrZSBwYXltZW50ICIpXSk7Cn0="},{"version":3,"sources":["/Users/rohansingh/Downloads/e-commerceApp/src/views/Checkout/Checkout.vue"],"names":[],"mappings":";;AACO,WAAM;;;8BACT,mBAAA,CAA+C,IAA/C,EAA+C,IAA/C,EAAI,wCAAJ,EAA0C,CAAA;AAAA;AAA1C,C;;8BAEI,mBAAA,CAEM,KAFN,EAEM;AAFD,WAAM,qBAEL;AAF2B,EAAA,IAAI,EAAC;AAEhC,CAFN,EAA8C,0FAA9C,EAEA,CAAA;AAAA;AAFA,C;;;uBAHN,mBAAA,CAUM,KAVN,EAAA,UAAA,EAUM,CATJ,UASI,EAPA,UAOA,EAHA,mBAAA,CAES,QAFT,EAES;AAFD,aAAM,iBAEL;AAFuB,IAAA,EAAE,EAAC,qBAE1B;AAFiD,IAAA,OAAK,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA,UAAA,MAAA;AAAA,aAAE,QAAA,CAAA,YAAA,EAAF;AAAA,KAAA;AAEtD,GAFT,EAAiF,gBAAjF,CAGA,CAVN,C","sourcesContent":["<template>\n  <div class=\"div_class\">\n    <h3>You will be redirected to payment page</h3>\n\n        <div class=\"alert alert-primary\" role=\"alert\">\n            While making payment use card number 4242 4242 4242 4242 and enter random cvv(3 digit)\n        </div>\n\n        <button class=\"checkout_button\" id=\"proceed-to-checkout\" @click=\"goToCheckout()\">\n            Make payment\n        </button>\n  </div>\n</template>\n<script>\nexport default {\n        data(){\n            return {\n                stripeAPIToken: process.env.VUE_APP_STRIPETOKEN,\n                stripe: '',\n                token:null,\n                sessionId:null,\n                checkoutBodyArray:[]\n                }\n        },\n\n        name:'Checkout',\n        props:[\"baseURL\"],\n    \n        mounted(){\n            this.token = localStorage.getItem(\"token\");\n            if(typeof( this.$route.params.id) === \"undefined\"){\n                this.$router.push({name:'Home'})\n            }\n            this.includeStripe('js.stripe.com/v3/', function(){\n                this.configureStripe();\n            }.bind(this) );\n            this.getAllItems()\n        },\n    \n        methods: {\n            /*\n                Includes Stripe.js dynamically\n            */\n            includeStripe( URL, callback ){\n                let documentTag = document, tag = 'script',\n                    object = documentTag.createElement(tag),\n                    scriptTag = documentTag.getElementsByTagName(tag)[0];\n                object.src = '//' + URL;\n                if (callback) { object.addEventListener('load', function (e) { callback(null, e); }, false); }\n                scriptTag.parentNode.insertBefore(object, scriptTag);\n            },\n    \n            /*\n                Configures Stripe by setting up the elements and \n                creating the card element.\n            */\n            configureStripe(){\n                this.stripe = Stripe( this.stripeAPIToken );            \n            },\n\n            getAllItems(){\n                axios.get(`${this.baseURL}cart/?token=${this.token}`).then((response) => {\n                    if(response.status==200){\n                        let products = response.data\n                        let len=Object.keys(products.cartItems).length\n                        for(let i=0;i<len;i++)\n                            this.checkoutBodyArray.push({\n                                imageUrl:products.cartItems[i].product.imageURL,\n                                productName:products.cartItems[i].product.name,\n                                quantity:products.cartItems[i].quantity,\n                                price:products.cartItems[i].product.price,\n                                productId:products.cartItems[i].product.id,\n                                userId:products.cartItems[i].userId\n                        })\n                    }\n                },err=>{\n                    console.log(err)\n                })\n            },\n            \n            goToCheckout(){\n                axios.post(this.baseURL+\"order/create-checkout-session\",\n                   this.checkoutBodyArray\n                ).then((response)=>{\n                  localStorage.setItem(\"sessionId\",response.data.sessionId)\n                  return response.data\n                }).then((session)=>{\n                   return this.stripe.redirectToCheckout({ sessionId: session.sessionId })\n                })\n            }\n           \n        }\n}\n        \n</script>\n\n <style >\n\n.alert{\n    width: 50%;\n}\n\n.div_class{\n    margin-top: 5%;\n    margin-left: 30%;\n}\n\n.checkout_button{\n    background-color: #5d3dec;\n    border: none;\n    color: white;\n    margin-left: 15%;\n    padding: 15px 30px;\n    text-align: center;\n    text-decoration: none;\n    display: inline-block;\n    font-size: 15px;\n    font-weight: bold;\n    border-radius: 15px;\n}\n\n.checkout_button:focus{\n    outline: none;\n    box-shadow: none;\n}\n\n.checkout_button:disabled{\n    background-color: #9b86f7;\n    border: none;\n    color: white;\n    margin-left: 15%;\n    padding: 15px 30px;\n    text-align: center;\n    text-decoration: none;\n    display: inline-block;\n    font-size: 15px;\n    font-weight: bold;\n    border-radius: 15px;\n    cursor:not-allowed;\n}\n\n</style>"],"sourceRoot":""}]}
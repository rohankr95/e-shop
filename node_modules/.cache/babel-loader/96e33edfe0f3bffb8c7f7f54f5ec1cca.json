{"remainingRequest":"/Users/khushbookumari/Desktop/e-commerceApp/node_modules/babel-loader/lib/index.js!/Users/khushbookumari/Desktop/e-commerceApp/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/khushbookumari/Desktop/e-commerceApp/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/khushbookumari/Desktop/e-commerceApp/src/views/Checkout/Checkout.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/khushbookumari/Desktop/e-commerceApp/src/views/Checkout/Checkout.vue","mtime":1631518566130},{"path":"/Users/khushbookumari/Desktop/e-commerceApp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/khushbookumari/Desktop/e-commerceApp/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/khushbookumari/Desktop/e-commerceApp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/khushbookumari/Desktop/e-commerceApp/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1628298225000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24uYmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc3RyaXBlQVBJVG9rZW46IHByb2Nlc3MuZW52LlZVRV9BUFBfU1RSSVBFVE9LRU4sCiAgICAgIHN0cmlwZTogJycsCiAgICAgIHRva2VuOiBudWxsLAogICAgICBzZXNzaW9uSWQ6IG51bGwsCiAgICAgIGNoZWNrb3V0Qm9keUFycmF5OiBbXQogICAgfTsKICB9LAogIG5hbWU6ICdDaGVja291dCcsCiAgcHJvcHM6IFsiYmFzZVVSTCJdLAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLnRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oInRva2VuIik7CgogICAgaWYgKHR5cGVvZiB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQgPT09ICJ1bmRlZmluZWQiKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAnSG9tZScKICAgICAgfSk7CiAgICB9CgogICAgdGhpcy5pbmNsdWRlU3RyaXBlKCdqcy5zdHJpcGUuY29tL3YzLycsIGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5jb25maWd1cmVTdHJpcGUoKTsKICAgIH0uYmluZCh0aGlzKSk7CiAgICB0aGlzLmdldEFsbEl0ZW1zKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvKgogICAgICAgIEluY2x1ZGVzIFN0cmlwZS5qcyBkeW5hbWljYWxseQogICAgKi8KICAgIGluY2x1ZGVTdHJpcGU6IGZ1bmN0aW9uIGluY2x1ZGVTdHJpcGUoVVJMLCBjYWxsYmFjaykgewogICAgICB2YXIgZG9jdW1lbnRUYWcgPSBkb2N1bWVudCwKICAgICAgICAgIHRhZyA9ICdzY3JpcHQnLAogICAgICAgICAgb2JqZWN0ID0gZG9jdW1lbnRUYWcuY3JlYXRlRWxlbWVudCh0YWcpLAogICAgICAgICAgc2NyaXB0VGFnID0gZG9jdW1lbnRUYWcuZ2V0RWxlbWVudHNCeVRhZ05hbWUodGFnKVswXTsKICAgICAgb2JqZWN0LnNyYyA9ICcvLycgKyBVUkw7CgogICAgICBpZiAoY2FsbGJhY2spIHsKICAgICAgICBvYmplY3QuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBjYWxsYmFjayhudWxsLCBlKTsKICAgICAgICB9LCBmYWxzZSk7CiAgICAgIH0KCiAgICAgIHNjcmlwdFRhZy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShvYmplY3QsIHNjcmlwdFRhZyk7CiAgICB9LAoKICAgIC8qCiAgICAgICAgQ29uZmlndXJlcyBTdHJpcGUgYnkgc2V0dGluZyB1cCB0aGUgZWxlbWVudHMgYW5kIAogICAgICAgIGNyZWF0aW5nIHRoZSBjYXJkIGVsZW1lbnQuCiAgICAqLwogICAgY29uZmlndXJlU3RyaXBlOiBmdW5jdGlvbiBjb25maWd1cmVTdHJpcGUoKSB7CiAgICAgIHRoaXMuc3RyaXBlID0gU3RyaXBlKHRoaXMuc3RyaXBlQVBJVG9rZW4pOwogICAgfSwKICAgIGdldEFsbEl0ZW1zOiBmdW5jdGlvbiBnZXRBbGxJdGVtcygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGF4aW9zLmdldCgiIi5jb25jYXQodGhpcy5iYXNlVVJMLCAiY2FydC8/dG9rZW49IikuY29uY2F0KHRoaXMudG9rZW4pKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICB2YXIgcHJvZHVjdHMgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgdmFyIGxlbiA9IE9iamVjdC5rZXlzKHByb2R1Y3RzLmNhcnRJdGVtcykubGVuZ3RoOwoKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgICAgX3RoaXMuY2hlY2tvdXRCb2R5QXJyYXkucHVzaCh7CiAgICAgICAgICAgICAgaW1hZ2VVcmw6IHByb2R1Y3RzLmNhcnRJdGVtc1tpXS5wcm9kdWN0LmltYWdlVVJMLAogICAgICAgICAgICAgIHByb2R1Y3ROYW1lOiBwcm9kdWN0cy5jYXJ0SXRlbXNbaV0ucHJvZHVjdC5uYW1lLAogICAgICAgICAgICAgIHF1YW50aXR5OiBwcm9kdWN0cy5jYXJ0SXRlbXNbaV0ucXVhbnRpdHksCiAgICAgICAgICAgICAgcHJpY2U6IHByb2R1Y3RzLmNhcnRJdGVtc1tpXS5wcm9kdWN0LnByaWNlLAogICAgICAgICAgICAgIHByb2R1Y3RJZDogcHJvZHVjdHMuY2FydEl0ZW1zW2ldLnByb2R1Y3QuaWQsCiAgICAgICAgICAgICAgdXNlcklkOiBwcm9kdWN0cy5jYXJ0SXRlbXNbaV0udXNlcklkCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgZnVuY3Rpb24gKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0pOwogICAgfSwKICAgIGdvVG9DaGVja291dDogZnVuY3Rpb24gZ29Ub0NoZWNrb3V0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGF4aW9zLnBvc3QodGhpcy5iYXNlVVJMICsgIm9yZGVyL2NyZWF0ZS1jaGVja291dC1zZXNzaW9uIiwgdGhpcy5jaGVja291dEJvZHlBcnJheSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgic2Vzc2lvbklkIiwgcmVzcG9uc2UuZGF0YS5zZXNzaW9uSWQpOwogICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhOwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChzZXNzaW9uKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMi5zdHJpcGUucmVkaXJlY3RUb0NoZWNrb3V0KHsKICAgICAgICAgIHNlc3Npb25JZDogc2Vzc2lvbi5zZXNzaW9uSWQKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Users/khushbookumari/Desktop/e-commerceApp/src/views/Checkout/Checkout.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"div_class\">\n    <h3>You will be redirected to payment page</h3>\n\n        <div class=\"alert alert-primary\" role=\"alert\">\n            While making payment use card number 4242 4242 4242 4242 and enter random cvv(3 digit)\n        </div>\n\n        <button class=\"checkout_button\" id=\"proceed-to-checkout\" @click=\"goToCheckout()\">\n            Make payment\n        </button>\n  </div>\n</template>\n<script>\nexport default {\n        data(){\n            return {\n                stripeAPIToken: process.env.VUE_APP_STRIPETOKEN,\n                stripe: '',\n                token:null,\n                sessionId:null,\n                checkoutBodyArray:[]\n                }\n        },\n\n        name:'Checkout',\n        props:[\"baseURL\"],\n    \n        mounted(){\n            this.token = localStorage.getItem(\"token\");\n            if(typeof( this.$route.params.id) === \"undefined\"){\n                this.$router.push({name:'Home'})\n            }\n            this.includeStripe('js.stripe.com/v3/', function(){\n                this.configureStripe();\n            }.bind(this) );\n            this.getAllItems()\n        },\n    \n        methods: {\n            /*\n                Includes Stripe.js dynamically\n            */\n            includeStripe( URL, callback ){\n                let documentTag = document, tag = 'script',\n                    object = documentTag.createElement(tag),\n                    scriptTag = documentTag.getElementsByTagName(tag)[0];\n                object.src = '//' + URL;\n                if (callback) { object.addEventListener('load', function (e) { callback(null, e); }, false); }\n                scriptTag.parentNode.insertBefore(object, scriptTag);\n            },\n    \n            /*\n                Configures Stripe by setting up the elements and \n                creating the card element.\n            */\n            configureStripe(){\n                this.stripe = Stripe( this.stripeAPIToken );            \n            },\n\n            getAllItems(){\n                axios.get(`${this.baseURL}cart/?token=${this.token}`).then((response) => {\n                    if(response.status==200){\n                        let products = response.data\n                        let len=Object.keys(products.cartItems).length\n                        for(let i=0;i<len;i++)\n                            this.checkoutBodyArray.push({\n                                imageUrl:products.cartItems[i].product.imageURL,\n                                productName:products.cartItems[i].product.name,\n                                quantity:products.cartItems[i].quantity,\n                                price:products.cartItems[i].product.price,\n                                productId:products.cartItems[i].product.id,\n                                userId:products.cartItems[i].userId\n                        })\n                    }\n                },err=>{\n                    console.log(err)\n                })\n            },\n            \n            goToCheckout(){\n                axios.post(this.baseURL+\"order/create-checkout-session\",\n                   this.checkoutBodyArray\n                ).then((response)=>{\n                  localStorage.setItem(\"sessionId\",response.data.sessionId)\n                  return response.data\n                }).then((session)=>{\n                   return this.stripe.redirectToCheckout({ sessionId: session.sessionId })\n                })\n            }\n           \n        }\n}\n        \n</script>\n\n <style >\n\n.alert{\n    width: 50%;\n}\n\n.div_class{\n    margin-top: 5%;\n    margin-left: 30%;\n}\n\n.checkout_button{\n    background-color: #5d3dec;\n    border: none;\n    color: white;\n    margin-left: 15%;\n    padding: 15px 30px;\n    text-align: center;\n    text-decoration: none;\n    display: inline-block;\n    font-size: 15px;\n    font-weight: bold;\n    border-radius: 15px;\n}\n\n.checkout_button:focus{\n    outline: none;\n    box-shadow: none;\n}\n\n.checkout_button:disabled{\n    background-color: #9b86f7;\n    border: none;\n    color: white;\n    margin-left: 15%;\n    padding: 15px 30px;\n    text-align: center;\n    text-decoration: none;\n    display: inline-block;\n    font-size: 15px;\n    font-weight: bold;\n    border-radius: 15px;\n    cursor:not-allowed;\n}\n\n</style>"],"sourceRoot":""}]}
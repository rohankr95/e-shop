{"remainingRequest":"/Users/rohansingh/Desktop/e-shop/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/rohansingh/Desktop/e-shop/src/views/Checkout/Checkout.vue?vue&type=template&id=6ae6fdc5","dependencies":[{"path":"/Users/rohansingh/Desktop/e-shop/src/views/Checkout/Checkout.vue","mtime":1631518566000},{"path":"/Users/rohansingh/Desktop/e-shop/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/rohansingh/Desktop/e-shop/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/rohansingh/Desktop/e-shop/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1628298225000},{"path":"/Users/rohansingh/Desktop/e-shop/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/rohansingh/Desktop/e-shop/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1628298225000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgPGRpdiBjbGFzcz0iZGl2X2NsYXNzIj4KICAgIDxoMz5Zb3Ugd2lsbCBiZSByZWRpcmVjdGVkIHRvIHBheW1lbnQgcGFnZTwvaDM+CgogICAgICAgIDxkaXYgY2xhc3M9ImFsZXJ0IGFsZXJ0LXByaW1hcnkiIHJvbGU9ImFsZXJ0Ij4KICAgICAgICAgICAgV2hpbGUgbWFraW5nIHBheW1lbnQgdXNlIGNhcmQgbnVtYmVyIDQyNDIgNDI0MiA0MjQyIDQyNDIgYW5kIGVudGVyIHJhbmRvbSBjdnYoMyBkaWdpdCkKICAgICAgICA8L2Rpdj4KCiAgICAgICAgPGJ1dHRvbiBjbGFzcz0iY2hlY2tvdXRfYnV0dG9uIiBpZD0icHJvY2VlZC10by1jaGVja291dCIgQGNsaWNrPSJnb1RvQ2hlY2tvdXQoKSI+CiAgICAgICAgICAgIE1ha2UgcGF5bWVudAogICAgICAgIDwvYnV0dG9uPgogIDwvZGl2Pgo="},{"version":3,"sources":["/Users/rohansingh/Desktop/e-shop/src/views/Checkout/Checkout.vue"],"names":[],"mappings":";EACE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACpB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;QAE1C,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACzC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QACzF,CAAC,CAAC,CAAC,CAAC,CAAC;;QAEL,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAC5E,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACf,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACd,CAAC,CAAC,CAAC,CAAC,CAAC","file":"/Users/rohansingh/Desktop/e-shop/src/views/Checkout/Checkout.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"div_class\">\n    <h3>You will be redirected to payment page</h3>\n\n        <div class=\"alert alert-primary\" role=\"alert\">\n            While making payment use card number 4242 4242 4242 4242 and enter random cvv(3 digit)\n        </div>\n\n        <button class=\"checkout_button\" id=\"proceed-to-checkout\" @click=\"goToCheckout()\">\n            Make payment\n        </button>\n  </div>\n</template>\n<script>\nexport default {\n        data(){\n            return {\n                stripeAPIToken: process.env.VUE_APP_STRIPETOKEN,\n                stripe: '',\n                token:null,\n                sessionId:null,\n                checkoutBodyArray:[]\n                }\n        },\n\n        name:'Checkout',\n        props:[\"baseURL\"],\n    \n        mounted(){\n            this.token = localStorage.getItem(\"token\");\n            if(typeof( this.$route.params.id) === \"undefined\"){\n                this.$router.push({name:'Home'})\n            }\n            this.includeStripe('js.stripe.com/v3/', function(){\n                this.configureStripe();\n            }.bind(this) );\n            this.getAllItems()\n        },\n    \n        methods: {\n            /*\n                Includes Stripe.js dynamically\n            */\n            includeStripe( URL, callback ){\n                let documentTag = document, tag = 'script',\n                    object = documentTag.createElement(tag),\n                    scriptTag = documentTag.getElementsByTagName(tag)[0];\n                object.src = '//' + URL;\n                if (callback) { object.addEventListener('load', function (e) { callback(null, e); }, false); }\n                scriptTag.parentNode.insertBefore(object, scriptTag);\n            },\n    \n            /*\n                Configures Stripe by setting up the elements and \n                creating the card element.\n            */\n            configureStripe(){\n                this.stripe = Stripe( this.stripeAPIToken );            \n            },\n\n            getAllItems(){\n                axios.get(`${this.baseURL}cart/?token=${this.token}`).then((response) => {\n                    if(response.status==200){\n                        let products = response.data\n                        let len=Object.keys(products.cartItems).length\n                        for(let i=0;i<len;i++)\n                            this.checkoutBodyArray.push({\n                                imageUrl:products.cartItems[i].product.imageURL,\n                                productName:products.cartItems[i].product.name,\n                                quantity:products.cartItems[i].quantity,\n                                price:products.cartItems[i].product.price,\n                                productId:products.cartItems[i].product.id,\n                                userId:products.cartItems[i].userId\n                        })\n                    }\n                },err=>{\n                    console.log(err)\n                })\n            },\n            \n            goToCheckout(){\n                axios.post(this.baseURL+\"order/create-checkout-session\",\n                   this.checkoutBodyArray\n                ).then((response)=>{\n                  localStorage.setItem(\"sessionId\",response.data.sessionId)\n                  return response.data\n                }).then((session)=>{\n                   return this.stripe.redirectToCheckout({ sessionId: session.sessionId })\n                })\n            }\n           \n        }\n}\n        \n</script>\n\n <style >\n\n.alert{\n    width: 50%;\n}\n\n.div_class{\n    margin-top: 5%;\n    margin-left: 30%;\n}\n\n.checkout_button{\n    background-color: #5d3dec;\n    border: none;\n    color: white;\n    margin-left: 15%;\n    padding: 15px 30px;\n    text-align: center;\n    text-decoration: none;\n    display: inline-block;\n    font-size: 15px;\n    font-weight: bold;\n    border-radius: 15px;\n}\n\n.checkout_button:focus{\n    outline: none;\n    box-shadow: none;\n}\n\n.checkout_button:disabled{\n    background-color: #9b86f7;\n    border: none;\n    color: white;\n    margin-left: 15%;\n    padding: 15px 30px;\n    text-align: center;\n    text-decoration: none;\n    display: inline-block;\n    font-size: 15px;\n    font-weight: bold;\n    border-radius: 15px;\n    cursor:not-allowed;\n}\n\n</style>"]}]}